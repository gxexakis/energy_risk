<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.css' rel='stylesheet' />

    <link href='stylesheets/style_riskmapping.css' rel='stylesheet' type='text/css' />
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css' />

</head>
<body>

<div id='map'></div>
<div class='map-overlay' id='features'>
    <h2>Sample Riskmeter</h2>
    <p> Welcome! You can open the various symbols in the map to explore the risk of various electricity producing facilities.</p>
</div>

<nav id='filter-group' class='filter-group'></nav>

<script>

    // Create the map and center it in country o choice (lat,long)
    mapboxgl.accessToken = 'pk.eyJ1IjoiZ3hleGFraXMiLCJhIjoiY2l1cTF0ejYyMDAybjJ0bno0eW9xc2xoaCJ9.ZJSNBZU45LFx-dsyS9A_yw';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/gxexakis/civ2ml69d00012iod5o9mruu5',
        center: [23.801414, 38.292803],
        zoom: 5.8
    });

    map.on('load', function() {

        map.on('click', function (e) {
            var features = map.queryRenderedFeatures(e.point, { layers: ['Energy stations'] });
            // if there are features within the given radius of the click event,
            // fly to the location of the click event
            if (features.length) {
                // Get coordinates from the symbol and center the map on those coordinates
                map.easeTo({
                    center: features[0].geometry.coordinates,
                    zoom: 9,
                    duration: 1000
                });
            }
        });

        map.on('mousemove', function (e) {
            var features = map.queryRenderedFeatures(e.point, { layers: ['Energy stations']});
            map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
        });

    });

</script>

</body>
</html>
